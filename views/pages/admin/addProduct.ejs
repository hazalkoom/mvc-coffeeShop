<%- include('../../partials/Aheader') %>

<div class="page-header">
    <h1>Add New Product</h1>
</div>

<% if (typeof error !== 'undefined' && error) { %>
    <div class="alert alert-error">
        <strong>Error!</strong> <%= error %>
    </div>
<% } %>

<div class="card">
    <form action="/admin/products/add" method="POST">
        <div class="form-card-body">
            
            <div class="form-section details">
                <h3 class="form-section-header">Product Details</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="product_name">Product Name</label>
                        <input type="text" id="product_name" name="product_name" class="form-control" required placeholder="e.g., Ethiopian Yirgacheffe" value="<%= typeof formData !== 'undefined' ? formData.product_name : '' %>">
                    </div>
                    <div class="form-group">
                        <label for="brand">Brand</label>
                        <input type="text" id="brand" name="brand" class="form-control" required placeholder="e.g., Roast Co." value="<%= typeof formData !== 'undefined' ? formData.brand : '' %>">
                    </div>
                    <div class="form-group">
                        <label for="category">Category</label>
                        <select id="category" name="category" class="form-control" required>
                            <option value="">Select a category</option>
                            <% categories.forEach(cat => { %>
                                <option value="<%= cat.category_name %>" <%= (typeof formData !== 'undefined' && formData.category === cat.category_name) ? 'selected' : '' %>><%= cat.category_name %></option>
                            <% }) %>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="country">Country</label>
                        <input type="text" id="country" name="country" class="form-control" placeholder="e.g., Ethiopia" value="<%= typeof formData !== 'undefined' ? formData.country : '' %>">
                    </div>
                     <div class="form-group">
                        <label for="price">Price</label>
                        <input type="number" id="price" name="price" step="0.01" class="form-control" required placeholder="e.g., 19.99" value="<%= typeof formData !== 'undefined' ? formData.price : '' %>">
                    </div>
                </div>
            </div>

            <div class="form-section images">
                <h3 class="form-section-header">Image Settings</h3>
                 <div class="form-group">
                    <label for="image_url">Large Image URL</label>
                    <input type="text" id="image_url" name="image_url" class="form-control" placeholder="https://example.com/image.jpg" value="<%= typeof formData !== 'undefined' ? formData.image_url : '' %>">
                    <small class="form-text">Full-size image for the product details page.</small>
                </div>
                <div class="form-group">
                    <label for="image_small_url">Small Image URL (Thumbnail)</label>
                    <input type="text" id="image_small_url" name="image_small_url" class="form-control" placeholder="https://example.com/thumb.jpg" value="<%= typeof formData !== 'undefined' ? formData.image_small_url : '' %>">
                    <small class="form-text">Smaller image for product listings and grids.</small>
                </div>
            </div>

        </div>
        <div class="form-actions">
            <a href="/admin/products" class="btn btn-secondary">Cancel</a>
            <button type="submit" class="btn btn-primary">Add Product</button>
        </div>
    </form>
</div>

<%- include('../../partials/Afooter') %>

